<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Uctimsclient-users] Problem with re-invite message
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/uctimsclient-users/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:uctimsclient-users%40lists.berlios.de?Subject=Re%3A%20%5BUctimsclient-users%5D%20Problem%20with%20re-invite%20message&In-Reply-To=%3CBAY120-W20649CC5E88859D3DCEB90CA850%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000524.html">
   <LINK REL="Next"  HREF="000526.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Uctimsclient-users] Problem with re-invite message</H1>
    <B>Zelalem Sintayehu</B> 
    <A HREF="mailto:uctimsclient-users%40lists.berlios.de?Subject=Re%3A%20%5BUctimsclient-users%5D%20Problem%20with%20re-invite%20message&In-Reply-To=%3CBAY120-W20649CC5E88859D3DCEB90CA850%40phx.gbl%3E"
       TITLE="[Uctimsclient-users] Problem with re-invite message">zelalems at hotmail.com
       </A><BR>
    <I>Tue Apr  7 08:57:48 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000524.html">[Uctimsclient-users] Problem with re-invite message
</A></li>
        <LI>Next message: <A HREF="000526.html">[Uctimsclient-users] No sound for audio call after answering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#525">[ date ]</a>
              <a href="thread.html#525">[ thread ]</a>
              <a href="subject.html#525">[ subject ]</a>
              <a href="author.html#525">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Richard, thank you for your prompt response. You are right, I want to send the dtmf from the client side and then based on it i want to reinvite the client to a new channel (like send another rtsp stream url so that the client starts to request the new file from the media server). However, as you said i used the exosip_event object (of the DMF event) to get the DID (i thought it is the same did created by the original invite). So, i will try to use the original DID. 

Thank you.

- Zelalem S. 


&gt;<i> Date: Tue, 7 Apr 2009 02:54:39 +0200
</I>&gt;<i> Subject: Re: [Uctimsclient-users]  Problem with re-invite message
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/uctimsclient-users">rgood at crg.ee.uct.ac.za</A>
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/uctimsclient-users">zelalems at hotmail.com</A>
</I>&gt;<i> CC: <A HREF="https://lists.berlios.de/mailman/listinfo/uctimsclient-users">uctimsclient-users at lists.berlios.de</A>
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Just to confirm what you want to do - from the client side you want to
</I>&gt;<i> send a DTMF tone and receive this on the server side (send 200 OK for it)
</I>&gt;<i> and then send a reINVITE to the client for the new channel.
</I>&gt;<i> 
</I>&gt;<i> I'm not sure how standards compliant that is - but is doesn't sound like
</I>&gt;<i> it breaks any SIP rules as the IPtv server is acting as a terminating SIP
</I>&gt;<i> UA.
</I>&gt;<i> 
</I>&gt;<i> You say you use the je-&gt;did - for which exosip_event object (je) is this??
</I>&gt;<i> You need to be using the same DID as the original INVITE request that
</I>&gt;<i> initiated the session.  If you are receiving the DTMF tone and using that
</I>&gt;<i> exosip_event object then it obviously will not work.
</I>&gt;<i> 
</I>&gt;<i> Richard.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi, i just wanted to extend the iptv server so that it continues to
</I>&gt;<i> &gt; present the other channel when the client presses a particular key on the
</I>&gt;<i> &gt; dtmf. I thought this is accomplished with a reinvite (am i correct?). So,
</I>&gt;<i> &gt; when the user pressess a key i intercepted the dtmf and then send the
</I>&gt;<i> &gt; invite message (which should be considered as re-invite on the client
</I>&gt;<i> &gt; side)  to the client. BTW, I also sent an ok message for the info (dtmf)
</I>&gt;<i> &gt; event that i received before sending teh invite (re-invite).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; With regard to the re-invite, I used je-&gt;did (the dialog id) together with
</I>&gt;<i> &gt; the same content_type_header that the iptv server used for creating the
</I>&gt;<i> &gt; first streaming communication in the eXosip_call_build_request function as
</I>&gt;<i> &gt;             eXosip_call_build_request (je-&gt;did, &quot;INVITE&quot;, &amp;reinvite).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; However, instead of sending the 200ok message, the client sends 100
</I>&gt;<i> &gt; (trying) for my &quot;invite&quot; message. According to the spec, I think it should
</I>&gt;<i> &gt; have sent me an &quot;ok&quot; message. On the other hand, i also wanted to
</I>&gt;<i> &gt; intercept the &quot;tying&quot; message that i recieved from the client, inorder to
</I>&gt;<i> &gt; send an &quot;ok&quot; message against it. However, almost all (except the &quot;trying&quot;
</I>&gt;<i> &gt; event) are enumerated in the documentation, but not &quot;trying&quot;
</I>&gt;<i> &gt; (<A HREF="http://www.antisip.com/documentation/exosip2/group__eXosip2__event.html">http://www.antisip.com/documentation/exosip2/group__eXosip2__event.html</A>).
</I>&gt;<i> &gt; So, hoping that it is created for this purpose, I also used the
</I>&gt;<i> &gt; MSG_IS_STATUS_1XX function as follows, but got segmentation fault.
</I>&gt;<i> &gt;         if (MSG_IS_STATUS_1XX(je-&gt;request))
</I>&gt;<i> &gt;         { .....}     //je is the incoming sip event.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; After trying so many things, i gave up now. So, i ask an advice on the
</I>&gt;<i> &gt; issue? Any advice on this will be highly appreciated.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thank you.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Zelalem S.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _________________________________________________________________
</I>&gt;<i> &gt; News, entertainment and everything you care about at Live.com. Get it now!
</I>&gt;<i> &gt; <A HREF="http://www.live.com/getstarted.aspx______________________________________________">http://www.live.com/getstarted.aspx______________________________________________</A>_
</I>&gt;<i> &gt; Uctimsclient-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/uctimsclient-users">Uctimsclient-users at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/uctimsclient-users">https://lists.berlios.de/mailman/listinfo/uctimsclient-users</A>
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>
_________________________________________________________________
Invite your mail contacts to join your friends list with Windows Live Spaces. It's easy!
<A HREF="http://spaces.live.com/spacesapi.aspx?wx_action=create&amp;wx_url=/friends.aspx&amp;mkt=en-us">http://spaces.live.com/spacesapi.aspx?wx_action=create&amp;wx_url=/friends.aspx&amp;mkt=en-us</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/uctimsclient-users/attachments/20090407/cdd6193c/attachment.html">https://lists.berlios.de/pipermail/uctimsclient-users/attachments/20090407/cdd6193c/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000524.html">[Uctimsclient-users] Problem with re-invite message
</A></li>
	<LI>Next message: <A HREF="000526.html">[Uctimsclient-users] No sound for audio call after answering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#525">[ date ]</a>
              <a href="thread.html#525">[ thread ]</a>
              <a href="subject.html#525">[ subject ]</a>
              <a href="author.html#525">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/uctimsclient-users">More information about the Uctimsclient-users
mailing list</a><br>
</body></html>
